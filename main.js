(()=>{"use strict";class e{constructor(e,t){this.conteiner=t,this.field=null,this.eventSource=new EventSource(e)}bindToDOM(){this.field=e.addTagHTML(this.conteiner,"widget-content"),this.eventSource.addEventListener("open",(e=>{console.log("sse open",e)})),this.eventSource.addEventListener("error",(e=>{console.log("sse error",e)})),this.eventSource.addEventListener("message",(e=>{const t=JSON.parse(e.data);this.addField(t),console.log("body",t),console.log("sse message")}))}addField(t){const s=e.addTagHTML(this.field,"widget-message"),d=e.addTagHTML(s,"message-img"),a=e.addTagHTML(s,"message-content");e.addTagHTML(a,"message-time").textContent=e.getNewFormatDate(t.time);e.addTagHTML(a,"message-text").textContent=t.text,"freekick"===t.type&&d.classList.add("freekick"),"goal"===t.type&&d.classList.add("goal"),this.field.scrollTop=this.field.scrollHeight}static addTagHTML(e,t=null,s="div"){const d=document.createElement(s);return d.classList.add(t),e.append(d),d}static getNewFormatDate(t){const s=new Date(t),d=String(s.getFullYear()),a=e._addZero(s.getMonth()),o=e._addZero(s.getDate());return`${e._addZero(s.getHours())}:${e._addZero(s.getMinutes())}:${e._addZero(s.getSeconds())} ${o}.${a}.${d}`}static _addZero(e){let t=e;return t<10&&(t=`0${t}`),t}}const t=document.querySelector(".conteiner");new e("https://javascript-21-websockets-backend-task3.onrender.com/sse",t).bindToDOM()})();